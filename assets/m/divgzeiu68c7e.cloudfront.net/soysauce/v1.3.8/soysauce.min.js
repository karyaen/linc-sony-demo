function FastClick(b){var c,a=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=10;this.layer=b;if(!b||!b.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){return FastClick.prototype.onClick.apply(a,arguments)};this.onMouse=function(){return FastClick.prototype.onMouse.apply(a,arguments)};this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(a,arguments)};this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(a,arguments)};this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(a,arguments)};this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(a,arguments)};if(FastClick.notNeeded(b)){return}if(this.deviceIsAndroid){b.addEventListener("mouseover",this.onMouse,true);b.addEventListener("mousedown",this.onMouse,true);b.addEventListener("mouseup",this.onMouse,true)}b.addEventListener("click",this.onClick,true);b.addEventListener("touchstart",this.onTouchStart,false);b.addEventListener("touchmove",this.onTouchMove,false);b.addEventListener("touchend",this.onTouchEnd,false);b.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){b.removeEventListener=function(e,g,d){var f=Node.prototype.removeEventListener;if(e==="click"){f.call(b,e,g.hijacked||g,d)}else{f.call(b,e,g,d)}};b.addEventListener=function(f,g,e){var d=Node.prototype.addEventListener;if(f==="click"){d.call(b,f,g.hijacked||(g.hijacked=function(h){if(!h.propagationStopped){g(h)}}),e)}else{d.call(b,f,g,e)}}}if(typeof b.onclick==="function"){c=b.onclick;b.addEventListener("click",function(d){c(d)},false);b.onclick=null}}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);FastClick.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled){return true}break;case"input":if((this.deviceIsIOS&&a.type==="file")||a.disabled){return true}break;case"label":case"video":return true}return(/\bneedsclick\b/).test(a.className)};FastClick.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":case"select":return true;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !a.disabled&&!a.readOnly;default:return(/\bneedsfocus\b/).test(a.className)}};FastClick.prototype.sendClick=function(b,c){var a,d;if(document.activeElement&&document.activeElement!==b){document.activeElement.blur()}d=c.changedTouches[0];a=document.createEvent("MouseEvents");a.initMouseEvent("click",true,true,window,1,d.screenX,d.screenY,d.clientX,d.clientY,false,false,false,false,0,null);a.forwardedTouchEvent=true;b.dispatchEvent(a)};FastClick.prototype.focus=function(a){var b;if(this.deviceIsIOS&&a.setSelectionRange){b=a.value.length;a.setSelectionRange(b,b)}else{a.focus()}};FastClick.prototype.updateScrollParent=function(b){var c,a;c=b.fastClickScrollParent;if(!c||!c.contains(b)){a=b;do{if(a.scrollHeight>a.offsetHeight){c=a;b.fastClickScrollParent=a;break}a=a.parentElement}while(a)}if(c){c.fastClickLastScrollTop=c.scrollTop}};FastClick.prototype.getTargetElementFromEventTarget=function(a){if(a.nodeType===Node.TEXT_NODE){return a.parentNode}return a};FastClick.prototype.onTouchStart=function(c){var a,d,b;if(c.targetTouches.length>1){return true}a=this.getTargetElementFromEventTarget(c.target);d=c.targetTouches[0];if(this.deviceIsIOS){b=window.getSelection();if(b.rangeCount&&!b.isCollapsed){return true}if(!this.deviceIsIOS4){if(d.identifier===this.lastTouchIdentifier){c.preventDefault();return false}this.lastTouchIdentifier=d.identifier;this.updateScrollParent(a)}}this.trackingClick=true;this.trackingClickStart=c.timeStamp;this.targetElement=a;this.touchStartX=d.pageX;this.touchStartY=d.pageY;if((c.timeStamp-this.lastClickTime)<200){c.preventDefault()}return true};FastClick.prototype.touchHasMoved=function(a){var c=a.changedTouches[0],b=this.touchBoundary;if(Math.abs(c.pageX-this.touchStartX)>b||Math.abs(c.pageY-this.touchStartY)>b){return true}return false};FastClick.prototype.onTouchMove=function(a){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a)){this.trackingClick=false;this.targetElement=null}return true};FastClick.prototype.findControl=function(a){if(a.control!==undefined){return a.control}if(a.htmlFor){return document.getElementById(a.htmlFor)}return a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};FastClick.prototype.onTouchEnd=function(c){var e,d,b,g,f,a=this.targetElement;if(!this.trackingClick){return true}if((c.timeStamp-this.lastClickTime)<200){this.cancelNextClick=true;return true}this.lastClickTime=c.timeStamp;d=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(this.deviceIsIOSWithBadTarget){f=c.changedTouches[0];a=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||a;a.fastClickScrollParent=this.targetElement.fastClickScrollParent}b=a.tagName.toLowerCase();if(b==="label"){e=this.findControl(a);if(e){this.focus(a);if(this.deviceIsAndroid){return false}a=e}}else{if(this.needsFocus(a)){if((c.timeStamp-d)>100||(this.deviceIsIOS&&window.top!==window&&b==="input")){this.targetElement=null;return false}this.focus(a);if(!this.deviceIsIOS4||b!=="select"){this.targetElement=null;c.preventDefault()}return false}}if(this.deviceIsIOS&&!this.deviceIsIOS4){g=a.fastClickScrollParent;if(g&&g.fastClickLastScrollTop!==g.scrollTop){return true}}if(!this.needsClick(a)){c.preventDefault();this.sendClick(a,c)}return false};FastClick.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};FastClick.prototype.onMouse=function(a){if(!this.targetElement){return true}if(a.forwardedTouchEvent){return true}if(!a.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(a.stopImmediatePropagation){a.stopImmediatePropagation()}else{a.propagationStopped=true}a.stopPropagation();a.preventDefault();return false}return true};FastClick.prototype.onClick=function(a){var b;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(a.target.type==="submit"&&a.detail===0){return true}b=this.onMouse(a);if(!b){this.targetElement=null}return b};FastClick.prototype.destroy=function(){var a=this.layer;if(this.deviceIsAndroid){a.removeEventListener("mouseover",this.onMouse,true);a.removeEventListener("mousedown",this.onMouse,true);a.removeEventListener("mouseup",this.onMouse,true)}a.removeEventListener("click",this.onClick,true);a.removeEventListener("touchstart",this.onTouchStart,false);a.removeEventListener("touchmove",this.onTouchMove,false);a.removeEventListener("touchend",this.onTouchEnd,false);a.removeEventListener("touchcancel",this.onTouchCancel,false)};FastClick.notNeeded=function(b){var a;if(typeof window.ontouchstart==="undefined"){return true}if((/Chrome\/[0-9]+/).test(navigator.userAgent)){if(FastClick.prototype.deviceIsAndroid){a=document.querySelector("meta[name=viewport]");if(a&&a.content.indexOf("user-scalable=no")!==-1){return true}}else{return true}}if(b.style.msTouchAction==="none"){return true}return false};FastClick.attach=function(a){return new FastClick(a)};if(typeof define!=="undefined"&&define.amd){define(function(){return FastClick})}else{if(typeof module!=="undefined"&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick}else{window.FastClick=FastClick}}(function(C,k){var x=function(N,M){return new x.Instance(N,M||{})};x.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};x.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;x.HAS_TOUCHEVENTS=("ontouchstart" in C);x.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;x.NO_MOUSEEVENTS=x.HAS_TOUCHEVENTS&&navigator.userAgent.match(x.MOBILE_REGEX);x.EVENT_TYPES={};x.DIRECTION_DOWN="down";x.DIRECTION_LEFT="left";x.DIRECTION_UP="up";x.DIRECTION_RIGHT="right";x.POINTER_MOUSE="mouse";x.POINTER_TOUCH="touch";x.POINTER_PEN="pen";x.EVENT_START="start";x.EVENT_MOVE="move";x.EVENT_END="end";x.DOCUMENT=document;x.plugins={};x.READY=false;function e(){if(x.READY){return}x.event.determineEventTypes();for(var M in x.gestures){if(x.gestures.hasOwnProperty(M)){x.detection.register(x.gestures[M])}}x.event.onTouch(x.DOCUMENT,x.EVENT_MOVE,x.detection.detect);x.event.onTouch(x.DOCUMENT,x.EVENT_END,x.detection.detect);x.READY=true}x.Instance=function(O,N){var M=this;e();this.element=O;this.enabled=true;this.options=x.utils.extend(x.utils.extend({},x.defaults),N||{});if(this.options.stop_browser_behavior){x.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior)}x.event.onTouch(O,x.EVENT_START,function(P){if(M.enabled){x.detection.startDetect(M,P)}});return this};x.Instance.prototype={on:function D(N,O){var P=N.split(" ");for(var M=0;M<P.length;M++){this.element.addEventListener(P[M],O,false)}return this},off:function p(N,O){var P=N.split(" ");for(var M=0;M<P.length;M++){this.element.removeEventListener(P[M],O,false)}return this},trigger:function H(N,P){var O=x.DOCUMENT.createEvent("Event");O.initEvent(N,true,true);O.gesture=P;var M=this.element;if(x.utils.hasParent(P.target,M)){M=P.target}M.dispatchEvent(O);return this},enable:function d(M){this.enabled=M;return this}};var G=null;var m=false;var h=false;x.event={bindDom:function(O,Q,P){var N=Q.split(" ");for(var M=0;M<N.length;M++){O.addEventListener(N[M],P,false)}},onTouch:function A(O,N,P){var M=this;this.bindDom(O,x.EVENT_TYPES[N],function Q(S){var T=S.type.toLowerCase();if(T.match(/mouse/)&&h){return}else{if(T.match(/touch/)||T.match(/pointerdown/)||(T.match(/mouse/)&&S.which===1)){m=true}}if(T.match(/touch|pointer/)){h=true}var R=0;if(m){if(x.HAS_POINTEREVENTS&&N!=x.EVENT_END){R=x.PointerEvent.updatePointer(N,S)}else{if(T.match(/touch/)){R=S.touches.length}else{if(!h){R=T.match(/up/)?0:1}}}if(R>0&&N==x.EVENT_END){N=x.EVENT_MOVE}else{if(!R){N=x.EVENT_END}}if(!R&&G!==null){S=G}else{G=S}P.call(x.detection,M.collectEventData(O,N,S));if(x.HAS_POINTEREVENTS&&N==x.EVENT_END){R=x.PointerEvent.updatePointer(N,S)}}if(!R){G=null;m=false;h=false;x.PointerEvent.reset()}})},determineEventTypes:function F(){var M;if(x.HAS_POINTEREVENTS){M=x.PointerEvent.getEvents()}else{if(x.NO_MOUSEEVENTS){M=["touchstart","touchmove","touchend touchcancel"]}else{M=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"]}}x.EVENT_TYPES[x.EVENT_START]=M[0];x.EVENT_TYPES[x.EVENT_MOVE]=M[1];x.EVENT_TYPES[x.EVENT_END]=M[2]},getTouchList:function t(M){if(x.HAS_POINTEREVENTS){return x.PointerEvent.getTouchList()}else{if(M.touches){return M.touches}else{return[{identifier:1,pageX:M.pageX,pageY:M.pageY,target:M.target}]}}},collectEventData:function K(O,N,P){var Q=this.getTouchList(P,N);var M=x.POINTER_TOUCH;if(P.type.match(/mouse/)||x.PointerEvent.matchType(x.POINTER_MOUSE,P)){M=x.POINTER_MOUSE}return{center:x.utils.getCenter(Q),timeStamp:new Date().getTime(),target:P.target,touches:Q,eventType:N,pointerType:M,srcEvent:P,preventDefault:function(){if(this.srcEvent.preventManipulation){this.srcEvent.preventManipulation()}if(this.srcEvent.preventDefault){this.srcEvent.preventDefault()}},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return x.detection.stopDetect()}}}};x.PointerEvent={pointers:{},getTouchList:function(){var M=this;var N=[];Object.keys(M.pointers).sort().forEach(function(O){N.push(M.pointers[O])});return N},updatePointer:function(N,M){if(N==x.EVENT_END){this.pointers={}}else{M.identifier=M.pointerId;this.pointers[M.pointerId]=M}return Object.keys(this.pointers).length},matchType:function(M,O){if(!O.pointerType){return false}var N={};N[x.POINTER_MOUSE]=(O.pointerType==O.MSPOINTER_TYPE_MOUSE||O.pointerType==x.POINTER_MOUSE);N[x.POINTER_TOUCH]=(O.pointerType==O.MSPOINTER_TYPE_TOUCH||O.pointerType==x.POINTER_TOUCH);N[x.POINTER_PEN]=(O.pointerType==O.MSPOINTER_TYPE_PEN||O.pointerType==x.POINTER_PEN);return N[M]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};x.utils={extend:function j(M,O,P){for(var N in O){if(M[N]!==k&&P){continue}M[N]=O[N]}return M},hasParent:function(N,M){while(N){if(N==M){return true}N=N.parentNode}return false},getCenter:function y(P){var Q=[],O=[];for(var N=0,M=P.length;N<M;N++){Q.push(P[N].pageX);O.push(P[N].pageY)}return{pageX:((Math.min.apply(Math,Q)+Math.max.apply(Math,Q))/2),pageY:((Math.min.apply(Math,O)+Math.max.apply(Math,O))/2)}},getVelocity:function a(M,O,N){return{x:Math.abs(O/M)||0,y:Math.abs(N/M)||0}},getAngle:function o(O,N){var P=N.pageY-O.pageY,M=N.pageX-O.pageX;return Math.atan2(P,M)*180/Math.PI},getDirection:function l(O,N){var M=Math.abs(O.pageX-N.pageX),P=Math.abs(O.pageY-N.pageY);if(M>=P){return O.pageX-N.pageX>0?x.DIRECTION_LEFT:x.DIRECTION_RIGHT}else{return O.pageY-N.pageY>0?x.DIRECTION_UP:x.DIRECTION_DOWN}},getDistance:function n(O,N){var M=N.pageX-O.pageX,P=N.pageY-O.pageY;return Math.sqrt((M*M)+(P*P))},getScale:function w(N,M){if(N.length>=2&&M.length>=2){return this.getDistance(M[0],M[1])/this.getDistance(N[0],N[1])}return 1},getRotation:function u(N,M){if(N.length>=2&&M.length>=2){return this.getAngle(M[1],M[0])-this.getAngle(N[1],N[0])}return 0},isVertical:function B(M){return(M==x.DIRECTION_UP||M==x.DIRECTION_DOWN)},stopDefaultBrowserBehavior:function c(O,N){var R,Q=["webkit","khtml","moz","ms","o",""];if(!N||!O.style){return}for(var M=0;M<Q.length;M++){for(var P in N){if(N.hasOwnProperty(P)){R=P;if(Q[M]){R=Q[M]+R.substring(0,1).toUpperCase()+R.substring(1)}O.style[R]=N[P]}}}if(N.userSelect=="none"){O.onselectstart=function(){return false}}}};x.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function z(N,M){if(this.current){return}this.stopped=false;this.current={inst:N,startEvent:x.utils.extend({},M),lastEvent:false,name:""};this.detect(M)},detect:function r(P){if(!this.current||this.stopped){return}P=this.extendEventData(P);var Q=this.current.inst.options;for(var O=0,M=this.gestures.length;O<M;O++){var N=this.gestures[O];if(!this.stopped&&Q[N.name]!==false){if(N.handler.call(N,P,this.current.inst)===false){this.stopDetect();break}}}if(this.current){this.current.lastEvent=P}if(P.eventType==x.EVENT_END&&!P.touches.length-1){this.stopDetect()}return P},stopDetect:function b(){this.previous=x.utils.extend({},this.current);this.current=null;this.stopped=true},extendEventData:function v(Q){var R=this.current.startEvent;if(R&&(Q.touches.length!=R.touches.length||Q.touches===R.touches)){R.touches=[];for(var O=0,M=Q.touches.length;O<M;O++){R.touches.push(x.utils.extend({},Q.touches[O]))}}var N=Q.timeStamp-R.timeStamp,T=Q.center.pageX-R.center.pageX,S=Q.center.pageY-R.center.pageY,P=x.utils.getVelocity(N,T,S);x.utils.extend(Q,{deltaTime:N,deltaX:T,deltaY:S,velocityX:P.x,velocityY:P.y,distance:x.utils.getDistance(R.center,Q.center),angle:x.utils.getAngle(R.center,Q.center),direction:x.utils.getDirection(R.center,Q.center),scale:x.utils.getScale(R.touches,Q.touches),rotation:x.utils.getRotation(R.touches,Q.touches),startEvent:R});return Q},register:function f(N){var M=N.defaults||{};if(M[N.name]===k){M[N.name]=true}x.utils.extend(x.defaults,M,true);N.index=N.index||1000;this.gestures.push(N);this.gestures.sort(function(P,O){if(P.index<O.index){return -1}if(P.index>O.index){return 1}return 0});return this.gestures}};x.gestures=x.gestures||{};x.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function J(M,N){switch(M.eventType){case x.EVENT_START:clearTimeout(this.timer);x.detection.current.name=this.name;this.timer=setTimeout(function(){if(x.detection.current.name=="hold"){N.trigger("hold",M)}},N.options.hold_timeout);break;case x.EVENT_MOVE:if(M.distance>N.options.hold_threshold){clearTimeout(this.timer)}break;case x.EVENT_END:clearTimeout(this.timer);break}}};x.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:true,doubletap_distance:20,doubletap_interval:300},handler:function E(O,P){if(O.eventType==x.EVENT_END){var N=x.detection.previous,M=false;if(O.deltaTime>P.options.tap_max_touchtime||O.distance>P.options.tap_max_distance){return}if(N&&N.name=="tap"&&(O.timeStamp-N.lastEvent.timeStamp)<P.options.doubletap_interval&&O.distance<P.options.doubletap_distance){P.trigger("doubletap",O);M=true}if(!M||P.options.tap_always){x.detection.current.name="tap";P.trigger(x.detection.current.name,O)}}}};x.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function L(M,N){if(M.eventType==x.EVENT_END){if(N.options.swipe_max_touches>0&&M.touches.length>N.options.swipe_max_touches){return}if(M.velocityX>N.options.swipe_velocity||M.velocityY>N.options.swipe_velocity){N.trigger(this.name,M);N.trigger(this.name+M.direction,M)}}}};x.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:false,drag_block_vertical:false,drag_lock_to_axis:false,drag_lock_min_distance:25},triggered:false,handler:function s(M,N){if(x.detection.current.name!=this.name&&this.triggered){N.trigger(this.name+"end",M);this.triggered=false;return}if(N.options.drag_max_touches>0&&M.touches.length>N.options.drag_max_touches){return}switch(M.eventType){case x.EVENT_START:this.triggered=false;break;case x.EVENT_MOVE:if(M.distance<N.options.drag_min_distance&&x.detection.current.name!=this.name){return}x.detection.current.name=this.name;if(x.detection.current.lastEvent.drag_locked_to_axis||(N.options.drag_lock_to_axis&&N.options.drag_lock_min_distance<=M.distance)){M.drag_locked_to_axis=true}var O=x.detection.current.lastEvent.direction;if(M.drag_locked_to_axis&&O!==M.direction){if(x.utils.isVertical(O)){M.direction=(M.deltaY<0)?x.DIRECTION_UP:x.DIRECTION_DOWN}else{M.direction=(M.deltaX<0)?x.DIRECTION_LEFT:x.DIRECTION_RIGHT}}if(!this.triggered){N.trigger(this.name+"start",M);this.triggered=true}N.trigger(this.name,M);N.trigger(this.name+M.direction,M);if((N.options.drag_block_vertical&&x.utils.isVertical(M.direction))||(N.options.drag_block_horizontal&&!x.utils.isVertical(M.direction))){M.preventDefault()}break;case x.EVENT_END:if(this.triggered){N.trigger(this.name+"end",M)}this.triggered=false;break}}};x.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:false},triggered:false,handler:function q(O,P){if(x.detection.current.name!=this.name&&this.triggered){P.trigger(this.name+"end",O);this.triggered=false;return}if(O.touches.length<2){return}if(P.options.transform_always_block){O.preventDefault()}switch(O.eventType){case x.EVENT_START:this.triggered=false;break;case x.EVENT_MOVE:var N=Math.abs(1-O.scale);var M=Math.abs(O.rotation);if(N<P.options.transform_min_scale&&M<P.options.transform_min_rotation){return}x.detection.current.name=this.name;if(!this.triggered){P.trigger(this.name+"start",O);this.triggered=true}P.trigger(this.name,O);if(M>P.options.transform_min_rotation){P.trigger("rotate",O)}if(N>P.options.transform_min_scale){P.trigger("pinch",O);P.trigger("pinch"+((O.scale<1)?"in":"out"),O)}break;case x.EVENT_END:if(this.triggered){P.trigger(this.name+"end",O)}this.triggered=false;break}}};x.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:false,prevent_mouseevents:false},handler:function g(M,N){if(N.options.prevent_mouseevents&&M.pointerType==x.POINTER_MOUSE){M.stopDetect();return}if(N.options.prevent_default){M.preventDefault()}if(M.eventType==x.EVENT_START){N.trigger(this.name,M)}}};x.gestures.Release={name:"release",index:Infinity,handler:function I(M,N){if(M.eventType==x.EVENT_END){N.trigger(this.name,M)}}};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=x}else{C.Hammer=x;if(typeof C.define==="function"&&C.define.amd){C.define("hammer",[],function(){return x})}}})(this);(function(a,b){if(a===b){return}Hammer.event.bindDom=function(c,e,d){a(c).on(e,function(f){var g=f.originalEvent||f;if(g.pageX===b){g.pageX=f.pageX;g.pageY=f.pageY}if(!g.target){g.target=f.target}if(g.which===b){g.which=g.button}if(!g.preventDefault){g.preventDefault=f.preventDefault}if(!g.stopPropagation){g.stopPropagation=f.stopPropagation}d.call(this,g)})};Hammer.Instance.prototype.on=function(c,d){return a(this.element).on(c,d)};Hammer.Instance.prototype.off=function(c,d){return a(this.element).off(c,d)};Hammer.Instance.prototype.trigger=function(c,e){var d=a(this.element);if(d.has(e.target).length){d=a(e.target)}return d.trigger({type:c,gesture:e})};a.fn.hammer=function(c){return this.each(function(){var d=a(this);var e=d.data("hammer");if(!e){d.data("hammer",new Hammer(this,c||{}))}else{if(e&&c){Hammer.utils.extend(e.options,c)}}})}})(window.jQuery||window.Zepto);if(!jQuery.fn.find){jQuery.fn.extend({find:function(b){var e,d,c,a=this.length;if(typeof b!=="string"){c=this;return this.pushStack(jQuery(b).filter(function(){for(e=0;e<a;e++){if(jQuery.contains(c[e],this)){return true}}}))}d=[];for(e=0;e<a;e++){jQuery.find(b,this[e],d)}d=this.pushStack(a>1?jQuery.unique(d):d);d.selector=(this.selector?this.selector+" ":"")+b;return d}})}if(!jQuery.fn.on){jQuery.fn.extend({on:function(c,a,f,e,b){var d,g;if(typeof c==="object"){if(typeof a!=="string"){f=f||a;a=undefined}for(d in c){this.on(d,a,f,c[d],b)}return this}if(f==null&&e==null){e=a;f=a=undefined}else{if(e==null){if(typeof a==="string"){e=f;f=undefined}else{e=f;f=a;a=undefined}}}if(e===false){e=returnFalse}else{if(!e){return this}}if(b===1){g=e;e=function(h){jQuery().off(h);return g.apply(this,arguments)};e.guid=g.guid||(g.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,c,e,f,a)})}})}if(!jQuery.fn.one){jQuery.fn.extend({one:function(b,a,d,c){return this.on(b,a,d,c,1)}})}if(!jQuery.fn.off){jQuery.fn.extend({off:function(c,a,e){var b,d;if(c&&c.preventDefault&&c.handleObj){b=c.handleObj;jQuery(c.delegateTarget).off(b.namespace?b.origType+"."+b.namespace:b.origType,b.selector,b.handler);return this}if(typeof c==="object"){for(d in c){this.off(d,a,c[d])}return this}if(a===false||typeof a==="function"){e=a;a=undefined}if(e===false){e=returnFalse}return this.each(function(){jQuery.event.remove(this,c,e,a)})}})}(function(a,b){var c="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(m){var j=this,o=a.isFunction(a.Deferred)?a.Deferred():0,n=a.isFunction(o.notify),f=j.find("img").add(j.filter("img")),g=[],l=[],h=[];if(a.isPlainObject(m)){a.each(m,function(p,q){if(p==="callback"){m=q}else{if(o){o[p](q)}}})}function k(){var p=a(l),q=a(h);if(o){if(h.length){o.reject(f,p,q)}else{o.resolve(f)}}if(a.isFunction(m)){m.call(j,f,p,q)}}function e(p){d(p.target,p.type==="error")}function d(p,q){if(p.src===c||a.inArray(p,g)!==-1){return}g.push(p);if(q){h.push(p)}else{l.push(p)}a.data(p,"imagesLoaded",{isBroken:q,src:p.src});if(n){o.notifyWith(a(p),[q,f,a(l),a(h)])}if(f.length===g.length){setTimeout(k);f.unbind(".imagesLoaded",e)}}if(!f.length){k()}else{f.bind("load.imagesLoaded error.imagesLoaded",e).each(function(p,r){var s=r.src;var q=a.data(r,"imagesLoaded");if(q&&q.src===s){d(r,q.isBroken);return}if(r.complete&&r.naturalWidth!==b){d(r,r.naturalWidth===0||r.naturalHeight===0);return}if(r.readyState||r.complete){r.src=c;r.src=s}})}return o?o.promise(j):j}})(jQuery);(function(a,b){a.soysauce=a.soysauce||{};soysauce.widgets=new Array();soysauce.vars={idCount:0,degradeAll:(/Android ([12]|4\.0)|Opera|SAMSUNG-SGH-I747|SCH-I535/.test(navigator.userAgent))?true:false,degrade:(/Android ([12]|4\.0)|Opera|SAMSUNG-SGH-I747/.test(navigator.userAgent))?true:false,degrade2:(/SCH-I535/.test(navigator.userAgent))?true:false,lastResizeTime:0,lastResizeTimerID:0,fastclick:[],ajaxQueue:[]};soysauce.getOptions=function(c){if(!b(c).attr("data-ss-options")){return false}return b(c).attr("data-ss-options").split(" ")};soysauce.getPrefix=function(){if(navigator.userAgent.match(/webkit/i)!==null){return"-webkit-"}else{if(navigator.userAgent.match(/windows\sphone|msie/i)!==null){return"-ms-"}else{if(navigator.userAgent.match(/^mozilla/i)!==null){return"-moz-"}else{if(navigator.userAgent.match(/opera/i)!==null){return"-o-"}}}}return""};soysauce.stifle=function(f,c){if(!f){return false}try{f.stopImmediatePropagation();if(f.gesture){f.gesture.stopPropagation()}}catch(d){console.log(f);console.warn("Soysauce: Error occurred calling soysauce.stifle() "+d.message);f.stopPropagation();f.propagationStopped=true}if(c){return false}f.preventDefault();if(f.gesture){f.gesture.preventDefault()}};soysauce.fetch=function(c){var e,d;if(!c){return false}if(typeof(c)==="object"){c=parseInt(b(c).attr("data-ss-id"),10)}if(typeof(c)==="string"){var f=parseInt(b(c).attr("data-ss-id"),10);if(isNaN(f)){f=parseInt(c,10)}c=f}if(c===+c&&c===(c|0)){e="[data-ss-id='"+c+"']"}else{e=c}soysauce.widgets.forEach(function(g){if(!g){return}if(g.id===c){d=g}});if(!d){return false}else{return d}};soysauce.getCoords=function(c){if(!c){return}if(c.originalEvent!==undefined){c=c.originalEvent}if(c.touches&&c.touches.length===1){return{x:c.touches[0].clientX,y:c.touches[0].clientY}}else{if(c.touches&&c.touches.length===2){return{x:c.touches[0].clientX,y:c.touches[0].clientY,x2:c.touches[1].clientX,y2:c.touches[1].clientY}}else{if(c.changedTouches&&c.changedTouches.length===1){return{x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY}}else{if(c.changedTouches&&c.changedTouches.length===2){return{x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY,x2:c.changedTouches[1].clientX,y2:c.changedTouches[1].clientY}}else{if(c.clientX!==undefined){return{x:c.clientX,y:c.clientY}}}}}}};soysauce.getArrayFromMatrix=function(c){return c.substr(7,c.length-8).split(", ")};soysauce.browser={pageLoad:new Date().getTime(),supportsSVG:(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))?true:false,supportsLocalStorage:function(){try{if(localStorage){localStorage.setItem("test",1);localStorage.removeItem("test");return true}else{return false}}catch(c){return false}}(),supportsSessionStorage:function(){try{if(sessionStorage){sessionStorage.setItem("test",1);sessionStorage.removeItem("test");return true}else{return false}}catch(c){return false}}(),getOrientation:function(){return(a.orientation!==0)?"landscape":"portrait"}};soysauce.browserInfo=soysauce.browser;soysauce.scrollTop=function(){a.setTimeout(function(){a.scrollTo(0,1)},0)};b(a).load(function(){var c=soysauce.fetch("[data-ss-widget='lazyloader'][data-ss-options*='cache']");if(c&&c.isCached){return}if(!b(this).scrollTop()){soysauce.scrollTop()}})})(window,jQuery,null);soysauce.ajax=function(b,h,d){var a=false;var g=true;if(soysauce.browser.supportsSessionStorage&&sessionStorage[b]){try{a=JSON.parse(sessionStorage[b]);if(!d){if(typeof(h)==="function"){return h(a,"cached")}else{return a}}}catch(c){}}var f=$.ajax({url:b,async:(!h)?false:true}).always(function(l,j,k){try{var n=JSON.stringify(l);a=JSON.parse(n);sessionStorage.setItem(b,n)}catch(m){if(m.code===DOMException.QUOTA_EXCEEDED_ERR){console.warn("Soysauce: sessionStorage is full.")}else{console.log("error message: "+m.message);console.warn("Soysauce: error fetching url '"+b+"'. Data returned needs to be JSON.");a=false}}if(typeof(h)==="function"){return h(a,j)}});soysauce.vars.ajaxQueue.push(f);return a};(function(b,c,a){a.destroy=function(d){try{var f=a.fetch(d);var h=f.widget;h.off("*");h.hammer().off("*");h.empty();h.off();h.hammer().off();h.remove();delete a.widgets[f.id-1];return true}catch(g){console.warn("Soysauce: could not destroy widget with id '"+f.id+"'. Possible memory leaks. Message: "+g.message)}return false}})(window,$,soysauce,null);soysauce.freezeChildren=function(a){var b=$("[data-ss-id='"+a+"']").find("[data-ss-widget]");b.each(function(c,e){var d=$(e).attr("data-ss-id");soysauce.freeze(d,false)})};soysauce.freeze=function(b,a){if(typeof(b)==="object"){b=b.id||parseInt($(b).attr("data-ss-id"),10)}a=(!a)?true:false;soysauce.fetch(b).handleFreeze();if(a){soysauce.freezeChildren(b)}};soysauce.unfreeze=function(a){if(typeof(a)==="object"){a=a.id||parseInt($(a).attr("data-ss-id"),10)}var b=$("[data-ss-id='"+a+"']").find("[data-ss-widget]");soysauce.fetch(a).handleUnfreeze();b.each(function(c,e){var d=$(e).attr("data-ss-id");soysauce.fetch(d).handleUnfreeze()})};soysauce.freezeAll=function(){try{soysauce.widgets.forEach(function(b){b.handleFreeze()})}catch(a){console.warn("Soysauce: Could not freeze all widgets. || Error Message: ",a.message);return false}return true};soysauce.unfreezeAll=function(){try{soysauce.widgets.forEach(function(b){b.handleUnfreeze()})}catch(a){console.warn("Soysauce: Could not unfreeze all widgets. || Error Message: ",a.message);return false}return true};(function(b,c,a){a.init=function(d,f){var h;var g="";var e=false;g=g.concat("[data-ss-widget='toggler'] > [data-ss-component='button']",", [data-ss-component='button'][data-ss-toggler-id]",", [data-ss-widget='carousel'] [data-ss-component='button']",", [data-ss-widget='carousel'] [data-ss-component='dots']",", [data-ss-utility='overlay'] [data-ss-component='close']");c(g).each(function(){try{a.vars.fastclick.push(FastClick.attach(this))}catch(j){console.warn("Soysauce: Could not attach Fastclick listener on soysauce component. "+j.message)}});if(!d){h=c("[data-ss-widget]:not([data-ss-id]), [data-ss-component='button'][data-ss-toggler-id]")}else{h=c(d)}if((!c(d)&&!h)||c(d).attr("data-ss-id")!==undefined){return e}h.each(function(){var m=c(this);var k=c(this).attr("data-ss-widget");var l;var j=false;if(!k&&m.attr("data-ss-toggler-id")!==undefined){k="toggler";j=true}if(!f&&/manual/.test(m.attr("data-ss-init"))){return}m.attr("data-ss-id",++a.vars.idCount);switch(k){case"toggler":l=a.togglers.init(this,j);break;case"carousel":l=a.carousels.init(this);break;case"lazyloader":l=a.lazyloader.init(this);break;case"autofill-zip":console.warn("Soysauce: autofill-zip is now deprecated. Please set data-ss-widget to 'geocoder'");case"geocoder":l=a.geocoder.init(this);break;case"autodetect-cc":l=a.autodetectCC.init(this);break;case"autosuggest":l=a.autosuggest.init(this);break;case"input-clear":l=a.inputClear.init(this);break}if(l!==undefined){l.type=k;l.id=a.vars.idCount;a.widgets.push(l);e=true;if(m.attr("data-ss-defer")!==undefined){l.defer=true}else{m.imagesLoaded(function(){l.initialized=true;m.trigger("SSWidgetReady")})}}else{m.removeAttr("data-ss-id");--a.vars.idCount}});return e};c(document).ready(function(){a.init();if(a.vars.degradeAll){c("body").attr("data-ss-degrade","true")}a.widgets.forEach(function(f){if(!f.defer){return}var e=0;var g=f.widget.find("[data-ss-widget]");g.each(function(){var h=a.fetch(this);if(h.initialized){if(++e===g.length){c(f.widget).trigger("SSWidgetReady").removeAttr("data-ss-defer");return}}else{h.widget.on("SSWidgetReady",function(){if(++e===g.length){c(f.widget).trigger("SSWidgetReady").removeAttr("data-ss-defer")}})}})});try{Hammer.gestures.Swipe.defaults.swipe_velocity=0.7;Hammer.gestures.Drag.defaults.drag_min_distance=1;Hammer.gestures.Drag.defaults.drag_lock_min_distance=1;Hammer.gestures.Drag.defaults.drag_lock_to_axis=true}catch(d){console.warn("Soysauce: Error setting options with HammerJS");console.error(d)}c(b).trigger("SSReady")})})(window,$,soysauce,null);soysauce.lateload=function(a){function b(c){var d=$(c);var e=d.attr("data-ss-ll-src");if(e){d.attr("src",e).removeAttr("data-ss-ll-src");return true}return false}if(a){return b(a)}else{$(document).on("DOMContentLoaded",function(){$("[data-ss-ll-src][data-ss-options='dom']").each(function(c,d){b(d)})});$(window).on("load",function(){if(!$("[data-ss-ll-src][data-ss-options='load']")){return}$("[data-ss-ll-src][data-ss-options='load']").each(function(c,d){b(d)})})}};soysauce.lateload();soysauce.overlay=(function(){var b="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";var c=$("body");var d=$("meta[name='viewport']");function a(){var e=this;this.overlay;this.content;this.close;this.hiddenItems=null;this.isOn=false;$(document).ready(function(){e.init()})}a.prototype.init=function(e){var g=document.createElement("div");var f=this;if($("[data-ss-utility='overlay']").length){return false}g.setAttribute("data-ss-utility","overlay");g.setAttribute("data-ss-state","inactive");document.body.appendChild(g);this.overlay=$("[data-ss-utility='overlay']");this.overlay.append("<div data-ss-component='close'>tap to close</div>");this.close=this.overlay.find("[data-ss-component='close']");this.overlay.append("<div data-ss-component='content'></div>");this.content=this.overlay.find("[data-ss-component='content']");this.close.on("click",function(){f.off()});return true};a.prototype.on=function(e,g,h){var f=this;if(this.isOn){return}if(typeof(e)==="string"){this.overlay.appendTo(e)}this.overlay.show();if(h){this.close.show()}window.setTimeout(function(){if(g){try{JSON.stringify(g);f.overlay.css(g)}catch(j){console.warn("Soysauce: Could not attach css; need to pass JSON css object")}}f.overlay.attr("data-ss-state","active");f.isOn=true},0)};a.prototype.off=function(){if(!this.isOn){return}this.isOn=false;this.overlay.attr("data-ss-state","inactive").removeAttr("style").hide();this.overlay.appendTo("body");this.content.find("[data-ss-widget]").each(function(){soysauce.destroy(this)});this.content.empty();c.css({overflow:"",height:""});if(this.hiddenItems){this.hiddenItems.show();this.hiddenItems=null}};a.prototype.toggle=function(){if(this.isOn){this.off()}else{this.on()}};a.prototype.injectCarousel=function(k,j){var f=k.items.clone();var h;var e=this;var l=true;var g="";this.on(null,j,l);if(k.infinite){f=f.slice(1,k.numChildren-1)}else{g+="finite"}f.removeAttr("data-ss-state").removeAttr("style");this.content.wrapInner("<div data-ss-widget='carousel' data-ss-options='overlay "+g+"' data-ss-index="+k.index+"/>");h=this.content.find("[data-ss-widget='carousel']");h.append(f);this.overlay.one(b,function(){h.one("SSWidgetReady",function(){c.css({overflow:"hidden",height:"100%"});e.hiddenItems=c.find("> *:not([data-ss-utility]):not(#ios7fix)");e.hiddenItems.hide()});soysauce.init(h[0])})};a.prototype.hideAssets=function(){this.close.css("opacity","0")};a.prototype.showAssets=function(){this.close.css("opacity","1")};return new a()})();(function(b,c,a){c(b).on("resize",function(d){if(a.vars.lastResizeID){clearTimeout(a.vars.lastResizeID)}a.vars.lastResizeID=b.setTimeout(function(){a.vars.lastResizeTime=d.timeStamp;a.widgets.forEach(function(e){if(!e.handleResize){return}e.handleResize();if(/carousel/i.test(e.type)){if(e.itemWidth){c(e.widget).trigger("SSWidgetResized")}}else{c(e.widget).trigger("SSWidgetResized")}})},30)})})(window,$,soysauce,null);soysauce.autodetectCC=(function(){function a(d){var f=soysauce.getOptions(d);var e=this;this.widget=$(this);this.input=$(d);this.prediction;this.result;this.format=false;this.valid=false;if(f){f.forEach(function(g){switch(g){case"format":e.format=(soysauce.vars.degrade2)?false:true;break}})}if(this.format){this.input.attr("maxlength","19")}else{this.input.attr("maxlength","16")}if(this.format&&soysauce.vars.degrade){this.input.on("keydown",function(h){var g=h.keyCode?h.keyCode:h.which;if(g!==8&&g!==46&&g!==91&&g!==17&&g!==189){soysauce.stifle(h);e.input.val(this.value+String.fromCharCode(h.keyCode))}})}this.input.on("keyup change",function(k){var j=k.target.value.replace(/[-\s]+/g,"");var h=k.keyCode?k.keyCode:k.which;var g;if(j.length){if(j.match(/^4/)){e.prediction="visa"}else{if(j.match(/^5/)){e.prediction="mastercard"}else{if(j.match(/^6/)){e.prediction="discover"}else{if(j.match(/^3/)){if(j.length===1){e.prediction="amex dinersclub jcb"}else{if(j.match(/^3(4|7)/)){e.prediction="amex"}else{if(j.match(/^3(0|8)/)){e.prediction="dinersclub"}else{if(j.match(/^35/)){e.prediction="jcb"}}}}}else{e.prediction=null}}}}$(k.target).trigger("SSPrediction")}else{$(k.target).trigger("SSEmpty");e.prediction=null}if(/visa/.test(e.prediction)&&j.length>=13){if(b(j)){e.valid=(/^4[0-9]{12}(?:[0-9]{3})?$/.test(j))?true:false;g="visa"}else{e.valid=false}}if(/mastercard/.test(e.prediction)&&j.length===16){if(b(j)){e.valid=(j.match(/^5[1-5][0-9]{14}$/))?true:false;g="mastercard"}else{e.valid=false}}if(/amex/.test(e.prediction)&&j.length>=15){if(b(j)){e.valid=(j.match(/^3[47][0-9]{13}$/))?true:false;g="amex"}else{e.valid=false}}if(/dinersclub/.test(e.prediction)&&j.length>=14){if(b(j)){e.valid=(j.match(/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/))?true:false;g="dinersclub"}else{e.valid=false}}if(/discover/.test(e.prediction)&&j.length===16){if(b(j)){e.valid=(j.match(/^6(?:011|5[0-9]{2})[0-9]{12}$/))?true:false;g="discover"}else{e.valid=false}}if(/jcb/.test(e.prediction)&&j.length===16){if(b(j)){e.valid=(j.match(/^(?:2131|1800|35\d{3})\d{11}$/))?true:false;g="jcb"}else{e.valid=false}}if(e.valid&&g){e.result=g;$(k.target).trigger("SSResult")}else{e.result=null;if(!e.prediction&&j.length===16||/visa/.test(e.prediction)&&j.length===13||/visa|mastercard|discover|dinersclub|jcb/.test(e.prediction)&&j.length===16||/amex/.test(e.prediction)&&j.length===15){$(k.target).trigger("SSResult")}}if(e.format&&j.length>3&&h!==8&&h!==46&&h!==91&&h!==17&&h!==189){e.formatInput(k)}})}a.prototype.formatInput=function(h){var j=this.input.val().replace(/[\s]+/g,"");var d=(/^3[47]/.test(j.replace(/[-\s]+/g,"")))?true:false;var g=(/^3(?:0[0-5]|[68][0-9])/.test(j.replace(/[-\s]+/g,""))&&!d)?true:false;if(soysauce.vars.degrade){c(this.input[0])}if(d||g){if(j[4]!==undefined&&j[4]!=="-"){j=f("-",4,j);this.input.val(j)}if(j[11]!==undefined&&j[11]!=="-"){j=f("-",11,j);this.input.val(j)}}else{if(j[4]!==undefined&&j[4]!=="-"){j=f("-",4,j);this.input.val(j)}if(j[9]!==undefined&&j[9]!=="-"){j=f("-",9,j);this.input.val(j)}if(j[14]!==undefined&&j[14]!=="-"){j=f("-",14,j);this.input.val(j)}}function f(l,k,e){if(k>0){return e.substring(0,k)+l+e.substring(k,e.length)}else{return l+e}}};function c(d){var e=d.length;d.setSelectionRange(19,19)}function b(g,f,k,j,h){for(j=+g[f=g.length-1],h=0;f--;){k=+g[f],j+=++h%2?2*k%10+(k>4):k}return !(j%10)}return{init:function(d){return new a(d)}}})();soysauce.autosuggest=(function(){function a(b){var d=soysauce.getOptions(b);var c=this;this.widget=$(b);this.input=$(b);if(d){d.forEach(function(f){switch(f){case"option1":break}})}var e={url:undefined,data:undefined,minCharacters:1,maxResults:10,wildCard:"",caseSensitive:false,notCharacter:"!",maxHeight:350,highlightMatches:true,onSelect:undefined,width:undefined,property:"text"};this.acSettings=e;this.obj=$(b);this.wildCardPatt=new RegExp(c.regexEscape(this.acSettings.wildCard||""),"g");this.results=$("<ul />");this.currentSelection=undefined;this.pageX=undefined;this.pageY=undefined;this.getJSONTimeout=0;$(this.results).addClass("jsonSuggest ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all").attr("role","listbox").css({xtop:(this.obj.position().top+this.obj.outerHeight())+"px",xleft:this.obj.position().left+"px",width:this.acSettings.width||(this.obj.outerWidth()+"px"),"z-index":1000000,position:"absolute","background-color":"black"}).hide();this.obj.after(this.results).keyup(function(f){switch(f.keyCode){case 13:$(c.currentSelection).trigger("click");return false;case 40:if(typeof c.currentSelection==="undefined"){c.currentSelection=$("li:first",c.results).get(0)}else{c.currentSelection=$(c.currentSelection).next().get(0)}c.setHoverClass(c.currentSelection);if(c.currentSelection){$(c.results).scrollTop(c.currentSelection.offsetTop)}return false;case 38:if(typeof c.currentSelection==="undefined"){c.currentSelection=$("li:last",c.results).get(0)}else{c.currentSelection=$(c.currentSelection).prev().get(0)}c.setHoverClass(c.currentSelection);if(c.currentSelection){$(c.results).scrollTop(c.currentSelection.offsetTop)}return false;default:c.runSuggest.apply(this,[f,c])}}).keydown(function(f){if((f.keyCode===9||f.keyCode===13)&&c.currentSelection){$(c.currentSelection).trigger("click");return true}}).blur(function(g){var f=$(c.results).offset();f.bottom=f.top+$(c.results).height();f.right=f.left+$(c.results).width();if(pageY<f.top||pageY>f.bottom||pageX<f.left||pageX>f.right){$(c.results).hide()}}).focus(function(f){$(this.results).css({top:(c.obj.position().top+c.obj.outerHeight())+"px",left:c.obj.position().left+"px"});if($("li",c.results).length>0){$(c.results).show()}}).attr("autocomplete","off");$(window).mousemove(function(f){this.pageX=f.pageX;this.pageY=f.pageY});this.acSettings.notCharacter=c.regexEscape(this.acSettings.notCharacter||"");if(this.widget.attr("data-ss-suggest-json-file")){$.ajax({url:this.widget.attr("data-ss-suggest-json-file"),dataType:"json",async:false,success:function(f){c.acSettings.data=f}})}if(this.acSettings.data&&typeof this.acSettings.data==="string"){this.acSettings.data=$.parseJSON(this.acSettings.data)}$(this.obj).trigger("SSLoaded")}a.prototype.handleResize=function(){};a.prototype.regexEscape=function(b,f){var c=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];if(f){for(var e=0;e<c.length;e++){if(c[e]===f){c.splice(e,1)}}}var d=new RegExp("(\\"+c.join("|\\")+")","g");return b.replace(d,"\\$1")};a.prototype.selectResultItem=function(b){this.obj.val(b[this.acSettings.property]);this.widget.trigger("SSAutoSuggested",{suggestion:b});$(this.results).html("").hide();if(typeof this.acSettings.onSelect==="function"){this.acSettings.onSelect(b)}};a.prototype.setHoverClass=function(b){$("li a",this.results).removeClass("ui-state-hover");if(b){$("a",b).addClass("ui-state-hover")}this.currentSelection=b};a.prototype.buildResults=function(b,c){c="("+c+")";var g=this;var e=true,d,k=0,f=this.acSettings.caseSensitive?new RegExp(c,"g"):new RegExp(c,"ig");$(this.results).html("").hide();for(d=0;d<b.length;d+=1){var j=$("<li />"),h=b[d][this.acSettings.property];if(this.acSettings.highlightMatches===true){h=h.replace(f,"<strong>$1</strong>")}$(j).append('<a class="ui-corner-all">'+h+"</a>");if(typeof b[d].image==="string"){$(">a",j).prepend('<img src="'+b[d].image+'" />')}if(typeof b[d].extra==="string"){$(">a",j).append("<small>"+b[d].extra+"</small>")}$(j).addClass("ui-menu-item").addClass((e)?"odd":"even").attr("role","menuitem").click((function(l){return function(){g.selectResultItem(b[l])}})(d)).mouseover((function(l){return function(){g.setHoverClass(l)}})(j));$(this.results).append(j);e=!e;k+=1;if(typeof this.acSettings.maxResults==="number"&&k>=this.acSettings.maxResults){break}}if($("li",this.results).length>0){this.currentSelection=undefined;$(this.results).show().css("height","auto");if($(this.results).height()>this.acSettings.maxHeight){$(this.results).css({overflow:"auto",height:this.acSettings.maxHeight+"px"})}}};a.prototype.runSuggest=function(d,b){var c=function(j){if(this.value.length<b.acSettings.minCharacters){b.clearAndHideResults();return false}var k=[],g=(!b.acSettings.wildCard)?b.regexEscape(this.value):b.regexEscape(this.value,b.acSettings.wildCard).replace(wildCardPatt,".*"),e=true,l,h;if(b.acSettings.notCharacter&&g.indexOf(b.acSettings.notCharacter)===0){g=g.substr(b.acSettings.notCharacter.length,g.length);if(g.length>0){e=false}}g=g||".*";g=b.acSettings.wildCard?"^"+g:g;l=b.acSettings.caseSensitive?new RegExp(g):new RegExp(g,"i");for(h=0;h<j.length;h+=1){if(l.test(j[h][b.acSettings.property])===e){k.push(j[h])}}b.buildResults(k,g)};if(b.acSettings.data&&b.acSettings.data.length){c.apply(this,[b.acSettings.data,b])}else{if(b.acSettings.url&&typeof b.acSettings.url==="string"){var f=this.value;if(f.length<b.acSettings.minCharacters){b.clearAndHideResults();return false}$(b.results).html('<li class="ui-menu-item ajaxSearching"><a class="ui-corner-all">Searching...</a></li>').show().css("height","auto");b.getJSONTimeout=window.clearTimeout(b.getJSONTimeout);b.getJSONTimeout=window.setTimeout(function(){$.getJSON(b.acSettings.url,{search:f},function(e){if(e){b.buildResults(e,f)}else{b.clearAndHideResults()}})},500)}}};a.prototype.clearAndHideResults=function(){$(this.results).html("").hide()};return{init:function(b){return new a(b)}}})();soysauce.carousels=(function(){var e=5000;var j=20;var k="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";var a=soysauce.getPrefix();var c=240;var d=0.8;function h(n){var t;var s=this;var l;var p="";var m;this.widget=$(n);this.index=0;this.maxIndex;this.container;this.items;this.currentItem;this.itemPadding;this.dots;this.numChildren=0;this.widgetWidth=0;this.widgetHeight=0;this.itemWidth=0;this.interruptedOffset=0;this.offset=0;this.ready=false;this.interrupted=false;this.lockScroll=false;this.nextBtn;this.prevBtn;this.freeze=false;this.jumping=false;this.lastTransitionEnd=0;this.sendClick=false;this.resizeID=0;this.infinite=true;this.autoscroll=false;this.autoscrollID;this.autoscrollInterval;this.autoscrollRestartID;this.infiniteID;this.forward;this.lastSlideTime;this.cloneDepth=0;this.looping=false;this.rewindCoord=0;this.peek=false;this.peekWidth=0;this.peekAlign;this.swipe=true;this.swiping=false;this.zoom=false;this.containerZoom=false;this.zoomIcon;this.overlay=false;this.isZoomed=false;this.zoomElement=null;this.zoomElementCenterX=0;this.zoomElementCenterY=0;this.zoomElementWidth=0;this.zoomElementHeight=0;this.zoomElementOffset=null;this.zoomTranslateX=0;this.zoomTranslateY=0;this.zoomTranslateXStart=0;this.zoomTranslateYStart=0;this.zoomTranslateMinX=0;this.zoomTranslateMinY=0;this.zoomTranslateMaxX=0;this.zoomTranslateMaxY=0;this.zoomScale=1;this.zoomScaleStart=1;this.zoomScalePrev=1;this.pinchEventsReady=false;this.lastZoomTap=0;this.multi=false;this.multiVars={numItems:2,stepSize:1,minWidth:0,even:false};this.autoheight=false;this.fade=false;if(this.widget.attr("data-ss-single-options")&&this.widget.find("[data-ss-component='item']").length===1){t=this.widget.attr("data-ss-single-options").split(" ");this.widget.attr("data-ss-single-item","true")}else{t=soysauce.getOptions(n)}if(t){t.forEach(function(u){switch(u){case"peek":s.peek=true;break;case"finite":s.infinite=false;break;case"autoscroll":s.autoscroll=true;break;case"noswipe":s.swipe=false;break;case"zoom":s.zoom=true;break;case"containerZoom":s.zoom=true;s.containerZoom=true;break;case"multi":s.multi=true;break;case"autoheight":s.autoheight=true;break;case"fade":s.fade=true;break;case"overlay":s.overlay=true;break}})}if(this.multi){this.infinite=false}this.widgetWidth=this.widget.outerWidth();this.widget.wrapInner("<div data-ss-component='container' />");this.widget.wrapInner("<div data-ss-component='container_wrapper' />");this.container=this.widget.find("[data-ss-component='container']");l=this.widget.find("[data-ss-component='container_wrapper']");if(this.infinite){l.after("<div data-ss-component='button' data-ss-button-type='prev' data-ss-state='enabled'></div><div data-ss-component='button' data-ss-button-type='next'></div>")}else{l.after("<div data-ss-component='button' data-ss-button-type='prev' data-ss-state='disabled'></div><div data-ss-component='button' data-ss-button-type='next'></div>")}l.after("<div data-ss-component='dots'></div>");this.dots=this.widget.find("[data-ss-component='dots']");this.nextBtn=l.find("~ [data-ss-button-type='next']");this.prevBtn=l.find("~ [data-ss-button-type='prev']");l.find("~ [data-ss-button-type='prev']").click(function(u){soysauce.stifle(u);if(s.ready&&!s.interrupted&&!s.freeze){s.slideBackward()}});l.find("~ [data-ss-button-type='next']").click(function(u){soysauce.stifle(u);if(s.ready&&!s.interrupted&&!s.freeze){s.slideForward()}});this.maxIndex=this.widget.find("[data-ss-component='item']").length;if(this.multi){this.multiVars.numItems=parseInt(this.widget.attr("data-ss-multi-set"),10)||2;this.multiVars.minWidth=parseInt(this.widget.attr("data-ss-multi-min-width"),10)||0;this.multiVars.stepSize=parseInt(this.widget.attr("data-ss-step-size"),10)||this.multiVars.numItems;this.maxIndex=Math.ceil(this.maxIndex/this.multiVars.stepSize)}if(this.infinite){if(this.multi){console.warn("Soysauce: 'multi' option with infinite scrolling not yet supported. Please add 'finite' option.");b(this,1)}else{b(this,1)}this.lastSlideTime=new Date().getTime()}this.items=this.container.find("> [data-ss-component='item']");this.itemPadding=parseInt(this.items.first().css("padding-left"),10)+parseInt(this.items.first().css("padding-right"),10);if(this.multi){this.multiVars.even=(this.items.length%this.multiVars.numItems===0)?true:false}if(!this.items.length){console.warn("Soysauce: Carousel cannot be instantiated; no items found.");return}this.numChildren=this.items.length;if(!this.infinite){l.find("~ [data-ss-button-type='next']").attr("data-ss-state",(this.numChildren>1)?"enabled":"disabled")}else{l.find("~ [data-ss-button-type='next']").attr("data-ss-state","enabled")}m=(this.infinite)?this.numChildren-2:this.numChildren;m=(this.multi)?this.maxIndex:m;for(i=0;i<m;i++){p.concat("<div data-ss-component='dot'></div>")}this.dots.html(p);this.dots=this.dots.find("div");this.dots.attr("data-ss-state","inactive");this.dots.first().attr("data-ss-state","active");this.dots.on("click",function(w){var v=parseInt(soysauce.getArrayFromMatrix(s.container.css(a+"transform"))[4],10);var u=0;if(v===s.offset){s.ready=true}if(!s.ready||s.interrupted||s.freeze){return}soysauce.stifle(w);u=s.dots.index(this);if(s.infinite){u+=1}s.jumpTo(u)});if(this.peek){this.peekAlign=this.widget.attr("data-ss-peek-align")||"center";this.peekWidth=parseInt(this.widget.attr("data-ss-peek-width"),10)||j;if(this.peekWidth%2){this.widget.attr("data-ss-peek-width",++this.peekWidth)}}this.items.attr("data-ss-state","inactive");this.index=parseInt(this.widget.attr("data-ss-index"),10)||0;if(this.infinite){if(!this.index){this.index++}else{if(this.index>this.maxIndex){this.index=this.maxIndex}}$(this.items[this.index]).attr("data-ss-state","active")}else{if(this.multi){var o=$(this.items.slice(0,this.multiVars.numItems));o.attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","active")}}this.container.imagesLoaded(function(u){var w=s.items.first();var v=parseInt(w.css("margin-left"),10)+parseInt(w.css("margin-right"),10);if(s.multi){if(s.multiVars.minWidth>0){s.multiVars.numItems=Math.floor(s.widgetWidth/s.multiVars.minWidth)}s.itemWidth=s.widgetWidth/s.multiVars.numItems}else{s.itemWidth=s.widgetWidth}$(window).load(function(){s.handleResize()});if(s.peek){s.itemWidth-=s.peekWidth*2;switch(s.peekAlign){case"center":s.offset+=s.peekWidth;break;case"left":break;case"right":s.offset+=(s.peekWidth*2);break}}if(!s.fade){s.container.width((s.itemWidth+v)*s.numChildren);s.items.css("width",s.itemWidth+"px")}s.offset-=(s.itemWidth*s.index);s.container.attr("data-ss-state","notransition");f(s.container[0],s.offset);s.widgetHeight=s.widget.outerHeight(true);if(s.overlay||s.zoomContainer){s.setZoomCenterPoint()}});this.container.hammer().on("release click",function(u){if(u.type==="click"){if(s.sendClick){return}else{soysauce.stifle(u);return false}}if(u.type==="release"){if(u.gesture.distance===0&&!s.swiping&&!s.isZoomed&&!s.lockScroll){s.sendClick=true}else{s.sendClick=false}}});if(this.swipe){if(/iphone os 7/i.test(navigator.userAgent)){var q=$("#ios7fix");if(!q.length){$("body").append("<div id='ios7fix' style='color: transparent; z-index: -1; height: 1px; width: 1px; position: absolute; top: 0; left: 0;'></div>")}this.container.on("touchmove touchend",function(u){q.html(u.type)})}this.container.hammer().on("touch release drag swipe",function(u){if(s.freeze){return}s.handleSwipe(u)})}if(this.zoom){l.after("<div data-ss-component='zoom_icon' data-ss-state='out'></div>");this.zoomIcon=l.find("~ [data-ss-component='zoom_icon']");if(this.containerZoom){this.zoomIcon.hammer().on("tap",function(v){var u=true;s.handleContainerZoom(v,u)});this.container.hammer().on("tap drag",function(u){if(s.lockScroll){return}if(u.type==="drag"){soysauce.stifle(u)}s.handleContainerZoom(u)})}else{this.container.hammer().on("tap",function(u){s.zoomIn(u)});this.zoomIcon.hammer().on("tap",function(u){s.zoomIn(u)})}}this.currentItem=$(this.items.get(s.index));if(this.overlay){this.zoomElement=this.currentItem;this.container.hammer().on("pinch doubletap drag",function(u){if(!/pinch|doubletap|drag/.test(u.type)){return}s.handleZoom(u)})}this.container.on(k,function(u){s.setTransitionedStates(u)});if(this.autoscroll){this.autoscrollOn()}if(this.autoheight){var r=$(this.items[this.index]).outerHeight(true);this.widget.css("min-height",r)}this.widget.one("SSWidgetReady",function(){s.widget.attr("data-ss-state","ready");s.ready=true;window.setTimeout(function(){s.container.attr("data-ss-state","ready")},0);if(s.autoheight){var u=$(s.items[s.index]).outerHeight(true);s.widget.css("height",u);window.setTimeout(function(){s.widget.css("min-height","0px")},300)}})}h.prototype.handleZoom=function(n){var l=this;if(this.swiping){return}soysauce.stifle(n);if(n.type==="doubletap"){if(n.timeStamp-this.lastZoomTap<500){return}this.zoomElement=this.currentItem;this.lastZoomTap=n.timeStamp;this.handleFreeze();this.zoomScalePrev=this.zoomScale;if(this.zoomScale<1.5){this.zoomElement.attr("data-ss-state","zooming");this.zoomScale=1.5;this.isZoomed=true}else{if(this.zoomScale<2.5){this.zoomElement.attr("data-ss-state","zooming");this.zoomScale=2.5;this.isZoomed=true}else{this.zoomElement.attr("data-ss-state","active");this.zoomScale=1;this.isZoomed=false}}this.zoomScaleStart=this.zoomScale;this.zoomTranslateXStart=this.zoomTranslateX;this.zoomTranslateYStart=this.zoomTranslateY;if(this.zoomScale>1){this.setFocusPoint(n);this.calcTranslateLimits();this.setTranslateLimits()}else{window.setTimeout(function(){l.resetZoomState()},0);return}window.setTimeout(function(){g(l.zoomElement[0],l.zoomScale,l.zoomTranslateX,l.zoomTranslateY);if(l.zoomScale===1){l.handleUnfreeze()}},0)}else{if(n.type==="pinch"){if(!this.pinchEventsReady){this.zoomElement=this.currentItem;this.zoomElement.attr("data-ss-state","zooming");this.zoomScalePrev=this.zoomScale;this.zoomScaleStart=this.zoomScale;this.zoomTranslateXStart=this.zoomTranslateX;this.zoomTranslateYStart=this.zoomTranslateY;this.isZoomed=true;this.handleFreeze();this.container.one("touchend",function(){if(l.zoomScale<=1){l.zoomElement.attr("data-ss-state","active")}});this.container.hammer().one("release",function(o){soysauce.stifle(o);l.pinchEventsReady=false;if(l.zoomScale<=1){l.resetZoomState();return}if(l.zoomScale>4){l.zoomScale=4;l.zoomScaleStart=l.zoomScale;return}l.zoomScaleStart=l.zoomScale;g(l.zoomElement[0],l.zoomScale,l.zoomTranslateX,l.zoomTranslateY)});this.pinchEventsReady=true}this.zoomScale=(((n.gesture.scale-1)*d)*this.zoomScaleStart)+this.zoomScaleStart;this.zoomScale=(this.zoomScale<0.3)?0.3:this.zoomScale;if(this.zoomScale>=4){this.zoomScale=4;return}this.setFocusPoint(n);this.calcTranslateLimits();this.setTranslateLimits();this.zoomElement.attr("data-ss-state","zooming");if(this.zoomScale<1){var m=(((n.gesture.scale-1)*d)*this.zoomScaleStart)+this.zoomScaleStart;g(this.zoomElement[0],m,0,0)}else{g(this.zoomElement[0],this.zoomScale,this.zoomTranslateX,this.zoomTranslateY)}}else{if(this.isZoomed){if(!this.panning){this.panning=true;this.zoomTranslateXStart=this.zoomTranslateX;this.zoomTranslateYStart=this.zoomTranslateY;this.container.hammer().one("release",function(o){l.panning=false})}this.zoomTranslateX=n.gesture.deltaX+this.zoomTranslateXStart;this.zoomTranslateY=n.gesture.deltaY+this.zoomTranslateYStart;this.setTranslateLimits();g(this.zoomElement[0],this.zoomScale,this.zoomTranslateX,this.zoomTranslateY)}}}};h.prototype.setZoomCenterPoint=function(){this.zoomElementWidth=this.zoomElement.width();this.zoomElementHeight=this.zoomElement.height();this.zoomElementOffset=this.widget.offset();this.zoomElementCenterX=(this.zoomElementWidth/2)+this.zoomElementOffset.left;this.zoomElementCenterY=(this.zoomElementHeight/2)+this.zoomElementOffset.top};h.prototype.setFocusPoint=function(l){this.zoomTranslateX=(this.zoomElementCenterX-l.gesture.center.pageX+this.zoomTranslateXStart+this.peekWidth)*(this.zoomScale/this.zoomScalePrev);this.zoomTranslateY=(this.zoomElementCenterY-l.gesture.center.pageY+this.zoomTranslateYStart)*(this.zoomScale/this.zoomScalePrev)};h.prototype.calcTranslateLimits=function(){var l;if(!this.zoomElementWidth){this.setZoomCenterPoint()}l=(parseInt(this.zoomElement.css("padding-left"),10)+parseInt(this.zoomElement.css("padding-right"),10))||0;this.zoomTranslateMinX=(((this.zoomElementWidth*this.zoomScale)-this.zoomElementWidth)/2)-this.peekWidth-l;this.zoomTranslateMaxX=-this.zoomTranslateMinX;this.zoomTranslateMinY=((this.zoomElementHeight*this.zoomScale)-this.zoomElementHeight)/2;this.zoomTranslateMaxY=-this.zoomTranslateMinY};h.prototype.setTranslateLimits=function(){if(this.zoomTranslateX>this.zoomTranslateMinX){this.zoomTranslateX=this.zoomTranslateMinX}else{if(this.zoomTranslateX<this.zoomTranslateMaxX){this.zoomTranslateX=this.zoomTranslateMaxX}}if(this.zoomTranslateY>this.zoomTranslateMinY){this.zoomTranslateY=this.zoomTranslateMinY}else{if(this.zoomTranslateY<this.zoomTranslateMaxY){this.zoomTranslateY=this.zoomTranslateMaxY}}};h.prototype.zoomIn=function(l){if(this.overlay){return}soysauce.stifle(l);soysauce.overlay.injectCarousel(this,{background:"black",opacity:"1"})};h.prototype.handleContainerZoom=function(n,m){var l=this;if(n.type==="tap"){this.zoomElement=this.currentItem;this.zoomElement.off();this.zoomElement.on(k,function(){if(l.isZoomed){l.zoomElement.attr("data-ss-state","zoomed");l.zoomIcon.attr("data-ss-state","in")}else{l.zoomIcon.attr("data-ss-state","out")}});if(!this.isZoomed){this.handleFreeze();this.zoomScalePrev=this.zoomScale;this.zoomElement.attr("data-ss-state","zooming");this.zoomScale=3;this.isZoomed=true}else{this.zoomElement.attr("data-ss-state","active");this.zoomScale=1;this.isZoomed=false}this.zoomScaleStart=this.zoomScale;this.zoomTranslateXStart=this.zoomTranslateX;this.zoomTranslateYStart=this.zoomTranslateY;if(this.isZoomed){this.setZoomCenterPoint();if(!m){this.setFocusPoint(n)}this.calcTranslateLimits();this.setTranslateLimits()}else{window.setTimeout(function(){l.resetZoomState()},0);return}window.setTimeout(function(){g(l.zoomElement[0],l.zoomScale,l.zoomTranslateX,l.zoomTranslateY);if(!l.isZoomed){l.handleUnfreeze()}},0)}else{if(!this.panning){this.panning=true;this.zoomTranslateXStart=this.zoomTranslateX;this.zoomTranslateYStart=this.zoomTranslateY;this.container.hammer().one("release",function(o){l.panning=false})}this.zoomTranslateX=n.gesture.deltaX+this.zoomTranslateXStart;this.zoomTranslateY=n.gesture.deltaY+this.zoomTranslateYStart;this.setTranslateLimits();g(this.zoomElement[0],this.zoomScale,this.zoomTranslateX,this.zoomTranslateY)}};h.prototype.resetZoomState=function(){var l=this;var m=(this.currentItem.attr("data-ss-state")==="active")?true:false;this.zoomTranslateX=0;this.zoomTranslateY=0;this.zoomScale=1;this.zoomScaleStart=1;this.zoomScalePrev=1;this.zoomElement=this.currentItem;this.isZoomed=false;this.setZoomCenterPoint();this.handleUnfreeze();g(this.zoomElement[0],this.zoomScale,this.zoomTranslateX,this.zoomTranslateY)};h.prototype.handleSwipe=function(p){var o=$(p.target).attr("data-ss-component");var l=this;var q=Math.abs(p.gesture.angle);if(l.jumping||l.freeze||l.looping){return}if(p.type==="swipe"&&p.gesture.eventType==="end"&&!l.ready){l.ready=true;l.interrupted=false;l.swiping=false;l.widget.attr("data-ss-state","ready");l.container.attr("data-ss-state","ready");return}if(l.lockScroll&&p.type==="release"){l.lockScroll=false;l.widget.attr("data-ss-state","ready");l.container.attr("data-ss-state","ready");window.setTimeout(function(){f(l.container[0],l.offset)},0);return}if(l.lockScroll){return}l.lockScroll=q>=60&&q<=120&&!l.swiping?true:false;if(l.lockScroll){return}if(!l.ready&&p.type==="touch"){l.interruptedOffset=(soysauce.vars.degrade)?parseInt(l.container[0].style.left,10):parseInt(soysauce.getArrayFromMatrix(l.container.css(a+"transform"))[4],10);l.interrupted=true;l.looping=false;l.container.attr("data-ss-state","notransition");l.widget.attr("data-ss-state","intransit");f(l.container[0],l.interruptedOffset);return}if(p.gesture.eventType==="end"){var n=(p.gesture.velocityX>=Hammer.gestures.Swipe.defaults.swipe_velocity)?true:false;var m=(n||p.gesture.distance>=c)?true:false;soysauce.stifle(p);l.widget.trigger("SSSwipe");l.ready=true;l.swiping=false;l.widget.attr("data-ss-state","intransit");l.container.attr("data-ss-state","intransit");if(m&&p.gesture.direction==="left"){if(!l.infinite&&((l.index===l.numChildren-1)||(l.multi&&l.index===l.maxIndex-Math.floor(l.multiVars.numItems/l.multiVars.stepSize)))){if(l.multi){if(l.index===l.maxIndex-1){l.gotoPos(l.offset)}else{l.gotoPos(l.index*-l.itemWidth*l.multiVars.stepSize+l.peekWidth)}}else{l.gotoPos(l.index*-l.itemWidth+l.peekWidth)}}else{if(soysauce.vars.degrade){l.rewindCoord=parseInt(l.container.css("left"),10)}l.slideForward()}}else{if(m&&p.gesture.direction==="right"){if(!l.infinite&&l.index===0){l.gotoPos(l.peekWidth)}else{if(soysauce.vars.degrade){l.rewindCoord=parseInt(l.container.css("left"),10)}l.slideBackward()}}else{f(l.container[0],l.offset)}}}else{if(p.gesture.eventType==="move"){soysauce.stifle(p);l.swiping=true;l.ready=false;l.container.attr("data-ss-state","notransition");l.widget.attr("data-ss-state","intransit");if(l.interrupted){f(l.container[0],l.interruptedOffset+p.gesture.deltaX)}else{f(l.container[0],l.offset+p.gesture.deltaX)}}}};h.prototype.gotoPos=function(l,m,p){var o=this;this.currentItem=$(this.items.get(o.index));if(this.overlay){this.resetZoomState()}this.offset=l;f(this.container[0],l);this.container.attr("data-ss-state","intransit");this.widget.attr("data-ss-state","intransit");this.ready=true;if(this.autoscroll){this.autoscrollOff();if(this.autoscrollRestartID){window.clearInterval(o.autoscrollRestartID);this.autoscrollRestartID=null}}if(this.infinite){var q=0,n=0;q=parseFloat(this.container.css(a+"transition-duration").replace(/s$/,""))*1000;q=(!q)?650:q;if(!p&&!m&&this.index===this.numChildren-2&&!this.forward){this.looping=true;this.infiniteID=window.setTimeout(function(){n=(soysauce.vars.degrade)?o.rewindCoord:parseInt(soysauce.getArrayFromMatrix(o.container.css(a+"transform"))[4],10);o.container.attr("data-ss-state","notransition");o.offset=n-o.itemWidth*(o.numChildren-2);f(o.container[0],o.offset);window.setTimeout(function(){o.container.attr("data-ss-state","intransit");if(o.peek&&/left/.test(o.peekAlign)){o.offset=-o.index*o.itemWidth}else{o.offset=-o.index*o.itemWidth+o.peekWidth}f(o.container[0],o.offset);o.looping=false},0)},0)}else{if(!p&&!m&&this.index===1&&this.forward){this.looping=true;this.infiniteID=window.setTimeout(function(){n=(soysauce.vars.degrade)?o.rewindCoord:parseInt(soysauce.getArrayFromMatrix(o.container.css(a+"transform"))[4],10);o.container.attr("data-ss-state","notransition");o.offset=o.itemWidth*(o.numChildren-2)+n;f(o.container[0],o.offset);window.setTimeout(function(){o.container.attr("data-ss-state","intransit");if(o.peek&&/left/.test(o.peekAlign)){o.offset=-o.itemWidth}else{o.offset=-o.itemWidth+o.peekWidth}f(o.container[0],o.offset);o.looping=false},0)},0)}else{this.infiniteID=null}}}};h.prototype.slideForward=function(){var n=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]),m=this.numChildren-1,l=(this.multi)?this.multiVars.stepSize*this.itemWidth:this.itemWidth;if(!this.ready||this.isZooming||(!this.infinite&&this.index===m)||(!this.infinite&&this.multi&&this.index===this.maxIndex-1)){return false}n.attr("data-ss-state","inactive");if(this.multi){var o=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems));o.attr("data-ss-state","inactive");this.index++}else{$(this.items[this.index++]).attr("data-ss-state","inactive")}if(this.infinite&&this.index===m){$(this.items[1]).attr("data-ss-state","active");this.index=1}else{if(this.multi){var o;if(!this.multiVars.even&&this.index===this.maxIndex-1){o=$(this.items.slice(this.items.length-this.multiVars.stepSize,this.items.length))}else{o=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems))}o.attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","active")}}n=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]);n.attr("data-ss-state","active");if(!this.infinite){if(this.index===m||(this.multi&&this.index===this.maxIndex-1)){this.nextBtn.attr("data-ss-state","disabled")}if(this.numChildren>1){this.prevBtn.attr("data-ss-state","enabled")}}this.ready=false;this.forward=true;if(this.multi&&!this.multiVars.even&&this.index===this.maxIndex-1){l-=(this.multiVars.stepSize-(this.items.length%this.multiVars.stepSize))*this.itemWidth}this.gotoPos(this.offset-l);return true};h.prototype.slideBackward=function(){var n=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]),m=this.numChildren-1,l=(this.multi)?this.multiVars.stepSize*this.itemWidth:this.itemWidth;if(!this.ready||(!this.infinite&&this.index===0)||this.isZooming){return false}n.attr("data-ss-state","inactive");if(this.multi){var o=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems));o.attr("data-ss-state","inactive");this.index--}else{$(this.items[this.index--]).attr("data-ss-state","inactive")}if(this.infinite&&this.index===0){$(this.items[m-1]).attr("data-ss-state","active");this.index=m-1}else{if(this.multi){var o=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems));o.attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","active")}}n=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]);n.attr("data-ss-state","active");if(!this.infinite){if(this.index===0){this.prevBtn.attr("data-ss-state","disabled")}if(this.numChildren>1){this.nextBtn.attr("data-ss-state","enabled")}}this.ready=false;this.forward=false;if(this.multi&&!this.multiVars.even&&this.index===0){this.gotoPos(0+this.peekWidth)}else{this.gotoPos(this.offset+l)}return true};h.prototype.handleResize=function(){var o;var n=0;var m="";var l=this;window.clearTimeout(this.resizeID);if(this.widget.is(":hidden")&&!this.defer){return}this.widgetWidth=this.widget.outerWidth();if(!this.widgetWidth){o=this.widget.parents().closest("[data-ss-widget='toggler'] [data-ss-component='content']")}if(o){o.css("display","block");this.widgetWidth=this.widgetWidth||o.outerWidth()}if(this.fade){return}if(this.overlay&&this.isZoomed){this.resetZoomState()}if(this.multi){if(this.multiVars.minWidth){this.multiVars.numItems=Math.floor(this.widgetWidth/this.multiVars.minWidth)}this.itemWidth=this.widgetWidth/this.multiVars.numItems}m=this.container.attr("data-ss-state");if(this.multi){n=this.widgetWidth-(this.itemWidth*this.multiVars.numItems)}else{n=this.widgetWidth-this.itemWidth}if(this.peek){this.itemWidth-=this.peekWidth*2}this.itemWidth+=n;if(this.peek&&/left/.test(this.peekAlign)){this.offset=-this.index*this.itemWidth}else{this.offset=-this.index*this.itemWidth+this.peekWidth}this.container.attr("data-ss-state","notransition");if(this.widget.attr("data-ss-state")){this.widget.attr("data-ss-state","intransit")}this.items.css("width",this.itemWidth+"px");f(this.container[0],this.offset);this.container.css("width",(this.itemWidth*this.numChildren)+"px");if(this.autoheight){this.widget.css("height",$(this.items[this.index]).outerHeight(true))}this.resizeID=window.setTimeout(function(){l.container.attr("data-ss-state","ready");if(l.widget.attr("data-ss-state")){l.widget.attr("data-ss-state","ready")}},300)};h.prototype.autoscrollOn=function(n){var m=this;if(!this.autoscroll&&!n){return false}this.autoscroll=!n?this.autoscroll:true;if(!this.autoscrollID){if(!this.autoscrollInterval){var l=this.widget.attr("data-ss-autoscroll-interval");this.autoscrollInterval=(!l)?e:parseInt(l,10)}this.autoscrollID=window.setInterval(function(){if(soysauce.vars.degrade){m.rewindCoord=-m.itemWidth*3-m.peekWidth}m.slideForward()},m.autoscrollInterval);return true}return false};h.prototype.autoscrollOff=function(l){var m=this;if(!this.autoscroll||!this.autoscrollID&&!l){return false}window.clearInterval(m.autoscrollID);this.autoscrollID=null;return true};h.prototype.handleFreeze=function(){if(this.freeze){return}this.freeze=true;this.autoscrollOff(true);return true};h.prototype.handleUnfreeze=function(){if(!this.freeze){return}this.freeze=false;this.autoscrollOn();return true};h.prototype.jumpTo=function(o,l){var n=this;if(o===this.index){return false}if(this.infinite){if(o<1||o>this.maxIndex){return false}}else{if(o<0||o>this.maxIndex-1){return false}}this.jumping=true;this.ready=false;var p=o*-this.itemWidth+this.peekWidth;if(this.infinite){$(this.items[this.index]).attr("data-ss-state","inactive");$(this.items[o]).attr("data-ss-state","active");$(this.dots[this.index-1]).attr("data-ss-state","inactive");$(this.dots[o-1]).attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","inactive");$(this.items[o]).attr("data-ss-state","active");$(this.dots[this.index]).attr("data-ss-state","inactive");$(this.dots[o]).attr("data-ss-state","active")}if(this.fade){this.index=o;return true}if(this.autoheight){var m=$(this.items[o]).outerHeight(true);this.widget.height(m)}this.gotoPos(p,true);this.index=o;return true};h.prototype.setTransitionedStates=function(m){var l=this;if(Math.abs(m.timeStamp-l.lastTransitionEnd)<300){return}l.lastTransitionEnd=m.timeStamp;l.widget.trigger("slideEnd");l.widget.trigger("SSSlideEnd");l.ready=true;l.jumping=false;l.interrupted=false;l.swiping=false;l.looping=false;l.container.attr("data-ss-state","ready");l.widget.attr("data-ss-state","ready");if(l.autoscroll&&!l.autoscrollRestartID){l.autoscrollRestartID=window.setTimeout(function(){l.autoscrollOn()},1000)}if(l.autoheight){l.widget.css("height",$(l.items[l.index]).outerHeight(true))}};h.prototype.updateItems=function(){var l=this;this.ready=false;this.container.find("> [data-ss-component='item']:not([data-ss-state])").attr("data-ss-state","inactive");if(!this.container.find("> [data-ss-component][data-ss-state='active']").length){if(this.infinite){this.container.find("> [data-ss-component='item']:nth-of-type(2)").attr("data-ss-state","active")}else{this.items.first().attr("data-ss-state","active")}}this.index=this.container.find("> [data-ss-component][data-ss-state='active']").index();this.items=this.container.find("> [data-ss-component='item']");this.items.css("width",this.itemWidth);this.numChildren=this.items.length;if(this.infinite){this.maxIndex=this.numChildren-2}else{this.maxIndex=this.numChildren-1}this.container.css("width",this.itemWidth*this.numChildren);this.container.imagesLoaded(function(){l.ready=true})};function f(m,l,n){l=l||0;n=n||0;if(soysauce.vars.degrade){m.style.left=l+"px"}else{m.style.webkitTransform=m.style.msTransform=m.style.OTransform=m.style.MozTransform=m.style.transform="translate3d("+l+"px,"+n+"px,0)"}}function g(m,n,l,o){l=l||0;o=o||0;m.style.webkitTransform=m.style.msTransform=m.style.OTransform=m.style.MozTransform=m.style.transform="matrix("+n+",0,0,"+n+","+l+","+o+")"}function b(p,o){var n=p.container.find("> [data-ss-component='item']");var m,l;if(o>p.maxIndex){return}p.cloneDepth=o;m=n.slice(0,o).clone();l=n.slice(p.maxIndex-o,p.maxIndex).clone();m.appendTo(p.container);l.prependTo(p.container)}return{init:function(l){return new h(l)}}})();soysauce.geocoder=(function(){var b="//jeocoder.herokuapp.com/zips/";var a="//www.mapquestapi.com/geocoding/v1/reverse?key=Fmjtd%7Cluub2l6tnu%2Ca5%3Do5-96tw0f";function c(d){var f=soysauce.getOptions(d);var e=this;this.widget=$(d);this.zip=this.widget.find("[data-ss-component='zip']");this.city=this.widget.find("[data-ss-component='city']");this.state=this.widget.find("[data-ss-component='state']");this.lastRequestedData;this.freeze=false;this.reverse=false;this.reverseGeocodeButton=this.widget.find("[data-ss-component='reverse-geocode']");if(f){f.forEach(function(g){switch(g){case"reverse":e.reverse=true;break}})}if(this.reverse){this.reverseGeocodeButton.on("click",function(){e.reverseGeocode()})}else{this.zip.on("keyup change",function(){e.getLocationData()})}}c.prototype.reverseGeocode=function(){var d=this;if(!navigator.geolocation||this.freeze){return}d.widget.trigger("SSDataFetch");navigator.geolocation.getCurrentPosition(g,e,f);var f={enableHighAccuracy:true,timeout:20000,maximumAge:0};function g(h){var j=a+"&lat="+h.coords.latitude+"&lng="+h.coords.longitude+"&callback=soysauce.fetch("+d.id+").setLocationData";$("body").append("<script src='"+j+"'><\/script>")}function e(h){console.warn("Soysauce (err "+h.code+") could not fetch data: "+h.message);d.widget.trigger("SSDataError")}};c.prototype.setLocationData=function(f){if(this.freeze){return}this.lastRequestedData=f;try{if(this.reverse){var d=f.results[0].locations[0];this.widget.data("zip",d.postalCode);this.widget.data("city",d.adminArea5);this.widget.data("state",d.adminArea3)}else{this.widget.data("city",f.city);this.widget.data("state",f.state)}this.widget.trigger("SSDataReady")}catch(g){console.warn("Soysauce: Unable to set location data. Try obtaining data from 'lastRequestedData' variable.")}};c.prototype.getLocationData=function(){var d=this;var e=this.zip[0].value;if(this.freeze){return}if((e.length===5)&&(parseFloat(e,10)==parseInt(e,10))&&!isNaN(e)){this.widget.trigger("SSDataFetch");$.ajax({dataType:"json",url:b+e,success:function(f){d.setLocationData(f)},error:function(){d.widget.trigger("SSDataError");console.warn("Soysauce: Could not fetch zip code "+e)}})}};c.prototype.handleFreeze=function(){this.freeze=true};c.prototype.handleUnfreeze=function(){this.freeze=false};return{init:function(d){return new c(d)}}})();soysauce.inputClear=(function(){function a(b){var d=soysauce.getOptions(b),c=this,e=false;this.widget=$(b);this.icon;this.widget.on("focus keyup",function(){c.handleIcon()});this.widget.on("blur",function(){if(e){return}c.widget.attr("data-ss-clear","off")});this.widget.wrap("<div data-ss-component='input-wrapper'></div>");this.widget.parent().css({display:c.widget.css("display"),width:c.widget.css("width")});this.widget.attr("data-ss-clear","off");this.widget.after("<span data-ss-component='icon'></span>");this.icon=this.widget.find("+ [data-ss-component='icon']");this.icon.on("mousedown touchstart",function(){e=true;c.icon.one("mouseup touchend",function(){c.clear();e=false})})}a.prototype.clear=function(){this.widget.val("").attr("data-ss-clear","off")};a.prototype.handleIcon=function(){this.widget.attr("data-ss-clear",(!this.widget.val().length)?"off":"on")};return{init:function(b){return new a(b)}}})();soysauce.lazyloader=(function(){var b=100;var d=$(window);var c=1200;function a(e){var g=soysauce.getOptions(e);var f=this;this.widget=$(e);this.items=this.widget.find("[data-ss-component='item']");this.threshold=parseInt(this.widget.attr("data-ss-threshold"),10)||c;this.processingThreshold=0;this.processing=false;this.button=this.widget.find("[data-ss-component='button']");this.complete=(this.items.length)?false:true;this.batchSize=parseInt(this.widget.attr("data-ss-batch-size"),10)||5;this.initialLoad=parseInt(this.widget.attr("data-ss-initial-load"),10);this.initialBatchLoaded=false;this.initialLoad=(this.initialLoad===0)?0:this.batchSize;this.freeze=false;this.autoload=false;this.autoloadInterval=parseInt(this.widget.attr("data-ss-interval"),10)||1000;this.autoloadIntervalID=0;this.cache=false;this.cacheInput=$("[data-ss-component='cache']");this.isCached=false;this.persistedLoad=false;this.hover=false;if(g){g.forEach(function(j){switch(j){case"autoload":f.autoload=true;break;case"cache":if(!f.cacheInput.length){console.warn("Soysauce: Cache input not found.")}else{f.cache=true;f.isCached=(parseInt(f.cacheInput.val(),10)===1)?true:false}break;case"hover":f.hover=true;f.autoload=true;break}})}if(this.cache){var h=false;if(this.isCached){this.widget.one("SSWidgetReady",function(){f.widget.trigger("SSLoadState");h=true})}else{this.cacheInput.val(1)}d.on("pagehide",function(j){f.widget.trigger("SSSaveState")});d.on("pageshow",function(j){f.persistedLoad=j.originalEvent.persisted;$(document).ready(function(){f.widget.trigger("SSLoadState")})})}this.processNextBatch(this.initialLoad);if(this.button.length){this.button.on("click",function(){f.processNextBatch()})}if(this.autoload){this.startAutoload()}}a.prototype.detectThreshold=function(){var f=this.widget.height()+this.widget.offset().top-this.threshold;var e=d.scrollTop()+d.height();if(!this.processing&&e>f){this.widget.trigger("SSThreshold")}};a.prototype.startAutoload=function(){var e=this;if(!this.autoload){return false}this.autoloadIntervalID=window.setInterval(function(){e.detectThreshold()},e.autoloadInterval);return true};a.prototype.pauseAutoload=function(){if(!this.autoloadIntervalID||!this.autoload){return false}window.clearInterval(this.autoloadIntervalID);this.autoloadIntervalID=null;return true};a.prototype.processNextBatch=function(f){var h;var e=this;var g=0;f=(f===0)?0:this.batchSize;h=$(this.items.splice(0,f));if(this.processing||this.complete||(!this.initialBatchLoaded&&this.initialLoad===0)||this.freeze){return}this.processing=true;this.widget.trigger("SSBatchStart");if(h.length===0){this.processing=false;this.complete=true;this.widget.trigger("SSItemsEmpty")}else{h.each(function(k,l){var j=$(l);if(e.freeze){return false}j.find("[data-ss-ll-src]").each(function(){soysauce.lateload(this)});j.imagesLoaded(function(m){j.attr("data-ss-state","loaded");if(++g===h.length){e.processing=false;e.widget.trigger("SSBatchLoaded");if(e.items.length&&e.initialBatchLoaded){e.calcProcessingThreshold()}if(!e.items.length){e.complete=true;e.widget.trigger("SSItemsEmpty")}else{if(!e.initialBatchLoaded){e.initialBatchLoaded=true;e.calcProcessingThreshold()}}}})})}};a.prototype.calcProcessingThreshold=function(){if(!this.items.length){return}this.processingThreshold=this.widget.height()+this.widget.offset().top-this.items.first().offset().top;this.processingThreshold=(this.threshold<c)?c:this.processingThreshold};a.prototype.reload=function(e,f){this.items=this.widget.find("[data-ss-component='item']:not([data-ss-state])");if(this.items.length){this.complete=false;if(e!==false){this.processNextBatch(f)}}};a.prototype.handleResize=function(){this.calcProcessingThreshold()};a.prototype.handleFreeze=function(){if(this.freeze){return false}this.freeze=true;this.pauseAutoload();return true};a.prototype.handleUnfreeze=function(){if(!this.freeze){return false}this.freeze=false;this.startAutoload();return true};return{init:function(e){return new a(e)}}})();soysauce.togglers=(function(){var b="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";function a(f,r){var q=this;var s=soysauce.getOptions(f);if(r){var k=$(f);var h=k.attr("data-ss-toggler-id");var m="[data-ss-toggler-id='"+h+"']";var n="";this.orphan=true;this.widget=$(m);this.widget.each(function(u,t){var v=$(t).attr("data-ss-component");switch(v){case"button":q.button=$(t);break;case"content":q.content=$(t);break}});if(!this.content){console.warn("Soysauce: No content found for toggler-id '"+h+"'. Toggler may not work.");return}this.button.click(function(t){q.toggle(null,t)});n=k.attr("data-ss-tab-group");this.orphanTabGroup=$("[data-ss-tab-group='"+n+"']");this.orphanTabs=(this.orphanTabGroup.length>1)?true:false;this.content.attr("data-ss-id",k.attr("data-ss-id"));this.allButtons=this.button;this.allContent=this.content;if(this.button.attr("data-ss-state")==="open"){this.setState("open");this.opened=true}else{this.setState("closed");this.opened=false}}else{this.widget=$(f);this.orphan=false;this.allButtons=this.widget.find("> [data-ss-component='button']");this.button=this.allButtons.first();this.allContent=this.widget.find("> [data-ss-component='content']");this.content=this.allContent.first()}this.parentID=0;this.state="closed";this.isChildToggler=false;this.hasTogglers=false;this.parent=undefined;this.ready=true;this.adjustFlag=false;this.freeze=false;this.opened=this.opened||false;this.slide=false;this.height=0;this.prevChildHeight=0;this.ajax=false;this.ajaxData;this.ajaxing=false;this.ajaxOnLoad=false;this.tab=false;this.childTabOpen=false;this.nocollapse=false;this.responsive=false;this.responsiveVars={threshold:parseInt(this.widget.attr("data-ss-responsive-threshold"),10)||768,accordions:true};if(s){s.forEach(function(t){switch(t){case"ajax":q.ajax=true;q.ajaxOnLoad=/true/.test(q.widget.attr("data-ss-ajax-onload"));break;case"tabs":q.tab=true;break;case"nocollapse":q.nocollapse=true;break;case"slide":q.slide=(soysauce.vars.degrade)?false:true;break;case"responsive":q.responsive=true;q.tab=true;break}})}if(this.orphan){this.content.on(b,function(){q.content.trigger("slideEnd");q.ready=true});return this}this.allButtons.append("<span class='icon'></span>");this.allContent.wrapInner("<div data-ss-component='wrapper'/>");this.hasTogglers=(this.widget.has("[data-ss-widget='toggler']").length>0)?true:false;this.isChildToggler=(this.widget.parents("[data-ss-widget='toggler']").length>0)?true:false;if(this.isChildToggler){var o=this.widget.parents("[data-ss-widget='toggler']");this.parentID=parseInt(o.attr("data-ss-id"),10);this.parent=soysauce.fetch(this.parentID)}if(this.widget.attr("data-ss-state")==="open"){this.allButtons.each(function(){var t=$(this);if(!t.attr("data-ss-state")){t.attr("data-ss-state","closed");t.find("+ [data-ss-component='content']").attr("data-ss-state","closed")}else{if(t.attr("data-ss-state")==="open"){q.button=t;q.content=t.find("+ [data-ss-component='content']")}}});this.opened=true}else{this.allButtons.attr("data-ss-state","closed");this.allContent.attr("data-ss-state","closed");this.widget.attr("data-ss-state","closed");this.opened=false}if(this.slide){this.widget.find("> [data-ss-component='content'][data-ss-state='open']").attr("data-ss-open-onload","true");this.allContent.attr("data-ss-state","open");this.allContent.each(function(){var t=$(this);t.imagesLoaded(function(){var u;if(q.hasTogglers){t.find("[data-ss-component='content']").attr("data-ss-state","closed")}u=t.outerHeight(true);t.attr("data-ss-slide-height",u);if(!t.attr("data-ss-open-onload")){t.css("height","0px");t.attr("data-ss-state","closed")}else{q.height=u;t.css("height",q.height)}if(q.hasTogglers){t.find("[data-ss-component='content']").removeAttr("data-ss-state")}})});this.allContent.on(b,function(){if(!q.orphan){q.widget.trigger("slideEnd")}q.ready=true})}this.allButtons.click(function(t){q.toggle(null,t)});if(this.responsive){this.handleResponsive()}if(this.ajax){var g=this.widget;var l=this.widget.find("> [data-ss-component='content'][data-ss-ajax-url]");var e;var d="";var p;var q=this;var c=false;if(l.length===0){console.warn("Soysauce: 'data-ss-ajax-url' tag required on content. Must be on the same domain if site doesn't support CORS.");return}l.each(function(u,t){e=$(t.previousElementSibling);if(q.ajaxOnLoad){g.on("SSWidgetReady",function(){j(q,t)})}else{e.click(function(){j(q,t)})}});function j(u,t){d=$(t).attr("data-ss-ajax-url");u.setState("ajaxing");u.ready=false;u.ajaxing=true;soysauce.ajax(d,function(w,v){if(/success|cached/.test(v)){u.ajaxData=w}else{console.warn("Soysauce: AJAX request to "+d+" failed in toggler.js")}u.setAjaxComplete()})}}if(this.tab&&this.nocollapse){this.content.imagesLoaded(function(){q.widget.css("min-height",q.button.outerHeight(true)+q.content.outerHeight(true))})}}a.prototype.openToggler=function(){var e=this.responsiveVars.accordions;if(!this.ready&&!e){return}var c=this;var d=0;if(this.slide){if(this.responsive&&!e){return}this.ready=false;if(this.adjustFlag||e){this.content.one(b,function(){c.adjustHeight()})}if(this.isChildToggler&&this.parent.slide){if(this.tab){this.parent.setHeight(this.parent.height+this.height-this.parent.prevChildHeight)}else{this.parent.addHeight(this.height)}this.parent.prevChildHeight=this.height}if(this.ajax&&this.height===0){$(this.content).imagesLoaded(function(){c.content.css("height","auto");c.height=c.content.outerHeight(true);c.content.css("height",c.height+"px")})}else{c.height=parseInt(c.content.attr("data-ss-slide-height"),10);c.content.css("height",c.height+"px")}}if(this.tab&&this.nocollapse){this.widget.css("min-height",this.button.outerHeight(true)+this.content.outerHeight(true))}this.opened=true;this.setState("open")};a.prototype.close=function(e,f){var d=this;var c=$(e);if(!this.ready){return}if(this.slide){this.ready=false;if(this.isChildToggler&&this.parent.slide&&f){this.parent.addHeight(-this.height)}this.content.css("height","0px")}if(!e){this.allButtons.attr("data-ss-state","closed");this.allContent.attr("data-ss-state","closed");this.state="closed";this.opened=false}else{if(c.attr("data-ss-state")==="closed"){return false}if(c.attr("data-ss-component")==="button"){this.button=c;if(!this.orphan){this.content=c.find("+ *")}}else{console.warn("Soysauce: target parameter must be a button")}}this.setState("closed")};a.prototype.open=function(d){var c=$(d);if(c.attr("data-ss-state")==="open"){return false}if(c.attr("data-ss-component")==="button"&&!this.orphan){c=c.find("+ *")}this.toggle(c[0])};a.prototype.doResize=function(){this.adjustFlag=true;if(this.opened){this.adjustHeight()}if(this.responsive){this.handleResponsive()}};a.prototype.handleResize=function(){var d=this;var c=this.allContent.find("[data-ss-widget]");if(this.defer&&c.length){this.allContent.css({clear:"both",position:"relative"});if(!c.length){this.doResize()}else{c.each(function(f,h){var g=soysauce.fetch(h).widget;if((f+1)!==c.length){return}g.one("SSWidgetResized",function(){d.allContent.css({clear:"",position:"",display:""});d.doResize()})})}}else{this.doResize()}};a.prototype.adjustHeight=function(){if(!this.slide){if(this.tab&&this.nocollapse){this.widget.css("min-height",this.button.outerHeight(true)+this.content.outerHeight(true))}return}if(this.opened){this.height=this.content.find("> [data-ss-component='wrapper']").outerHeight(true);this.content.attr("data-ss-slide-height",this.height).height(this.height)}};a.prototype.addHeight=function(c){this.height+=c;this.height=(this.height<0)?0:this.height;if(this.slide){this.content.attr("data-ss-slide-height",this.height)}this.content.css("height",this.height+"px")};a.prototype.setHeight=function(c){this.height=c;this.height=(this.height<0)?0:this.height;if(this.slide){this.content.attr("data-ss-slide-height",this.height)}this.content.css("height",this.height+"px")};a.prototype.toggle=function(f,h){var d=this;var g;if(this.freeze||this.ajaxing){return}if(h){g=h.target}else{if(f&&!this.orphan){if(typeof(f)==="string"){g=f=this.widget.find(f)[0]}try{if(/content/.test(f.attributes["data-ss-component"].value)){var c=this.widget.find(f);g=f.previousElementSibling}}catch(h){console.warn("Soysauce: component passed is not a Soysauce component. Opening first toggler.");g=this.button[0]}}else{g=this.button[0];if(g&&!g.attributes["data-ss-component"]){console.warn("Soysauce: component passed is not a Soysauce component. Opening first toggler.")}}}if(!$(g).attr("data-ss-component")){g=$(g).closest("[data-ss-component='button']")[0]}if(this.orphan){if(this.opened){this.opened=false;this.setState("closed")}else{if(this.orphanTabs){this.orphanTabGroup.each(function(){var e=soysauce.fetch(this);if(e.opened){e.toggle()}})}this.opened=true;this.setState("open")}return}if(this.tab){var j=(this.button.attr("data-ss-state")==="open"&&this.button[0]===g)?true:false;if((this.responsive&&!this.responsiveVars.accordions||this.nocollapse)&&(this.button[0]===g)){return}if(this.isChildToggler&&this.tab){this.parent.childTabOpen=!j;if(j){this.parent.prevChildHeight=0}}this.close(null,j);this.button=$(g);this.content=$(g).find("+ [data-ss-component='content']");if(this.slide){d.height=parseInt(d.content.attr("data-ss-slide-height"),10)}if(j){this.widget.attr("data-ss-state","closed");this.opened=false;return}this.openToggler()}else{this.button=$(g);this.content=$(g).find("+ [data-ss-component='content']");var j=(this.button.attr("data-ss-state")==="open"&&this.widget.find("[data-ss-component='button'][data-ss-state='open']").length===1)?true:false;if(j){this.opened=false}(this.button.attr("data-ss-state")==="closed")?this.openToggler():this.close()}};a.prototype.setState=function(c){this.state=c;this.button.attr("data-ss-state",c);this.content.attr("data-ss-state",c);if(this.orphan){return}if(this.opened){this.widget.attr("data-ss-state","open")}else{this.widget.attr("data-ss-state","closed")}if(this.responsive&&this.opened){this.handleResponsive()}};a.prototype.setAjaxComplete=function(){this.ajaxing=false;this.ready=true;if(this.opened){this.setState("open")}else{this.setState("closed")}this.widget.trigger("SSAjaxComplete")};a.prototype.handleFreeze=function(){this.freeze=true};a.prototype.handleUnfreeze=function(){this.freeze=false};a.prototype.handleResponsive=function(){if(!this.responsive){return}if(window.innerWidth>=this.responsiveVars.threshold){this.responsiveVars.accordions=false;this.widget.attr("data-ss-responsive-type","tabs");if(!this.opened){this.button=this.widget.find("[data-ss-component='button']").first();this.content=this.widget.find("[data-ss-component='content']").first();this.openToggler()}this.widget.css("min-height",this.button.outerHeight(true)+this.content.outerHeight(true)+"px")}else{this.responsiveVars.accordions=true;this.widget.attr("data-ss-responsive-type","accordions");this.widget.css("min-height","0")}};return{init:function(c,d){return new a(c,d)}}})();